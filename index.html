<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Impostor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;

    background: radial-gradient(circle at 30% 20%, rgba(92,124,250,0.25), transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(46,204,113,0.2), transparent 50%),
                linear-gradient(160deg, #0f111a, #121629 60%, #0c0f17);

    color: white;
}
.container {
    position: relative;
    width: 360px;
    background: linear-gradient(145deg, #1f2433, #161a25);
    padding: 28px;
    border-radius: 18px;
    box-shadow:
        0 10px 30px rgba(0,0,0,0.6),
        inset 0 1px 0 rgba(255,255,255,0.05);
    text-align: center;
    transition: 0.3s ease;
}
h1 {
    margin-top: 0;
}
button {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(145deg, #5c7cfa, #4263eb);
    color: white;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
    transition: 0.2s ease;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.5);
}

button:active {
    transform: translateY(1px);
}
button:hover {
    background: #3b5bdb;
}
input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
    border: 1px solid #2f3545;
    background: #222633;
    color: white;
    box-sizing: border-box;
    text-align: center;
}
.player-list {
    margin-top: 18px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.code {
    font-size: 28px;
    letter-spacing: 4px;
    margin: 10px 0;
}

.reveal-card {
    margin: 10px auto 40px auto; /* wiƒôkszy odstƒôp od przycisku */
    padding: 22px;
    width: 85%; /* lekko mniejsze okienko */
    max-width: 280px;
    border-radius: 20px;
    background: linear-gradient(145deg, #1c2130, #141822);
    box-shadow:
        0 15px 35px rgba(0,0,0,0.6),
        inset 0 1px 0 rgba(255,255,255,0.05);
    transform: scale(0.96);
    opacity: 0;
    transition: all 0.28s ease;
}

.reveal-card.show {
    transform: scale(1);
    opacity: 1;
}

.role-label {
    font-size: 14px;
    letter-spacing: 1.5px;
    opacity: 0.7;
    margin-bottom: 15px;
}

.word {
    font-size: 26px;
    font-weight: 700;
    padding: 14px 18px;
    border-radius: 14px;
    background: linear-gradient(145deg, #5c7cfa, #4263eb);
    display: inline-block;
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    letter-spacing: 1px;
}

/* === IMPOSTOR STYL === */

.reveal-card.impostor {
    background: linear-gradient(145deg, #2a1515, #1a0f0f);
    box-shadow:
        0 15px 35px rgba(0,0,0,0.7),
        0 0 25px rgba(231,76,60,0.35);
}

.reveal-card.impostor .word {
    background: linear-gradient(145deg, #e74c3c, #c0392b);
}

.reveal-card.impostor .role-label {
    color: #ff6b6b;
}
.hidden {
    display: none;
}
.back {
    position: absolute;
    top: 15px;
    left: 15px;
    width: auto;
    padding: 8px 14px;
    font-size: 14px;
    background: #2c3142;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

.back:hover {
    background: #3a4055;
}

.player-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(145deg, #1b2030, #141822);
    padding: 12px 14px;
    border-radius: 16px;
    box-shadow:
        0 8px 18px rgba(0,0,0,0.5),
        inset 0 1px 0 rgba(255,255,255,0.04);
    transition: 0.25s ease;
    animation: fadeIn 0.3s ease;
}

.player-card:hover {
    transform: translateY(-3px);
    box-shadow:
        0 12px 22px rgba(0,0,0,0.6),
        0 0 10px rgba(92,124,250,0.25);
}

.player-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.avatar {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    background: linear-gradient(145deg, #5c7cfa, #4263eb);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

.player-info {
    text-align: left;
}

.player-name {
    font-weight: 600;
    font-size: 15px;
}

.player-status {
    font-size: 12px;
    color: #2ecc71;
}

.host-badge {
    font-size: 18px;
    margin-left: 8px;
}

.kick-btn {
    width: auto;
    padding: 6px 10px;
    margin-left: 10px;
    background: linear-gradient(145deg, #e74c3c, #c0392b);
    border-radius: 10px;
    font-size: 14px;
}

.kick-btn:hover {
    transform: scale(1.1);
}

.modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.65);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background: linear-gradient(145deg, #1f2433, #161a25);
    padding: 25px;
    border-radius: 18px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.7);
    text-align: center;
    width: 280px;
    animation: fadeIn 0.2s ease;
}

.modal-buttons {
    margin-top: 18px;
    display: flex;
    gap: 12px;
}

.modal-buttons button {
    flex: 1;
    margin-top: 0;
}

.modal.hidden {
    display: none;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>

<div class="container" id="app">

    <button id="backBtn" class="back hidden" onclick="goBack()">‚Üê Cofnij</button>

    <!-- MENU -->
    <div id="menu">
        <h1>IMPOSTOR</h1>
        <button onclick="showCreate()">Stw√≥rz grƒô</button>
        <button onclick="showJoin()">Do≈ÇƒÖcz do gry</button>
    </div>

    <!-- CREATE -->
    <div id="create" class="hidden">
        <h2>Twoja nazwa</h2>
        <input id="createName" placeholder="Nazwa gracza">
        <h3>Tryb gry</h3>
        <button onclick="createGame('classic')">Klasyczna gra</button>
        <button onclick="createGame('hint')">Gra z podpowiedziƒÖ</button>
    </div>

    <!-- JOIN -->
    <div id="join" class="hidden">
        <h2>Do≈ÇƒÖcz do gry</h2>
        <input id="joinName" placeholder="Nazwa gracza">
        <input id="joinCode" placeholder="Kod lobby">
        <button onclick="joinGame()">Do≈ÇƒÖcz</button>
    </div>

    <!-- LOBBY -->
    <div id="lobby" class="hidden">
        <h2>Kod gry</h2>
        <div class="code" id="lobbyCode"></div>

        <div class="player-list" id="players"></div>

        <button id="startBtn" onclick="startGame()">Start</button>
        <button onclick="leaveGame()">Opu≈õƒá</button>
    </div>

    <!-- GAME -->
    <div id="game" class="hidden">
        <div id="revealCard" class="reveal-card">
    <div id="roleLabel" class="role-label"></div>
    <div id="word" class="word"></div>
</div>

        <button id="newRoundBtn" onclick="newRound()">Nowa runda</button>
        <button onclick="leaveGame()">Opu≈õƒá</button>
    </div>
    <button id="backToLobbyBtn" onclick="backToLobby()" style="display:none;">
    ‚¨Ö Wr√≥ƒá do lobby
</button>

<div id="kickModal" class="modal hidden">
    <div class="modal-content">
        <p id="kickText"></p>
        <div class="modal-buttons">
            <button onclick="executeKick()">Tak</button>
            <button onclick="closeKickModal()">Anuluj</button>
        </div>
    </div>
</div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyAcNOpg3tuY_xhbERC-l3ieWo-qsUoDYxE",
  authDomain: "impostor-4c89d.firebaseapp.com",
  databaseURL: "https://impostor-4c89d-default-rtdb.firebaseio.com",
  projectId: "impostor-4c89d",
  storageBucket: "impostor-4c89d.firebasestorage.app",
  messagingSenderId: "666744045134",
  appId: "1:666744045134:web:f19514b88188ab4ff24d1f"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();


// === DANE LOKALNE ===
let playerId = Math.random().toString(36).substr(2, 9);
let playerName = "";
let lobbyId = "";
let isHost = false;
let gameMode = "classic";
let isLeaving = false;

// S≈Çowa testowe
const words = [
/* OSOBY */
{word:"Robert Lewandowski", hint:"Polska"}, 
{word:"Michael Jackson", hint:"Rƒôkawiczka"}, 
{word:"Albert Einstein", hint:"Jƒôzyk"}, 
{word:"Elon Musk", hint:"Neuralink"}, 
{word:"Taylor Swift", hint:"Kot"}, 
{word:"Harry Potter", hint:"Sowa"}, 
{word:"Spider-Man", hint:"Ciotka"}, 
{word:"Batman", hint:"Robina"}, 
{word:"Sherlock Holmes", hint:"Fid≈ºet"}, 
{word:"Pikachu", hint:"TeamRocket"}, 

/* MIEJSCA */
{word:"Nowy Jork", hint:"Statua"}, 
{word:"Pary≈º", hint:"Kawiarnia"}, 
{word:"Ba≈Çtyk", hint:"Bursztyn"}, 
{word:"Tatry", hint:"Ornak"}, 
{word:"Sahara", hint:"Beduin"}, 
{word:"Amazonia", hint:"Anakonda"}, 
{word:"Tokio", hint:"Sumo"}, 
{word:"Londyn", hint:"Autobus"}, 
{word:"Rzym", hint:"Gelato"}, 
{word:"Las Vegas", hint:"Showgirl"}, 

/* FILMY I SERIALE */
{word:"Gra o Tron", hint:"Zima"}, 
{word:"W≈Çadca Pier≈õcieni", hint:"Hobbit"}, 
{word:"Star Wars", hint:"Yoda"}, 
{word:"Matrix", hint:"Or√°culo"}, 
{word:"Titanic", hint:"Serce"}, 
{word:"Avatar", hint:"Unobtanium"}, 
{word:"Jurassic Park", hint:"Mosazny"}, 
{word:"Stranger Things", hint:"Rowery"}, 
{word:"Breaking Bad", hint:"Kamizelka"}, 
{word:"The Office", hint:"Burr"}, 

/* PRZEDMIOTY */
{word:"Smartfon", hint:"Pƒôkniƒôcie"}, 
{word:"Laptop", hint:"Wentylator"},
{word:"Kamera", hint:"Selfie"}, 
{word:"Zegarek", hint:"Bateria"}, 
{word:"Plecak", hint:"Zamek"}, 
{word:"Walizka", hint:"Etykieta"}, 
{word:"Latarka", hint:"≈öwiat≈Ço"}, 
{word:"Parasol", hint:"Wiatr"}, 
{word:"Okulary", hint:"≈öruby"}, 
{word:"S≈Çuchawki", hint:"Przew√≥d"}, 

/* JEDZENIE */
{word:"Pizza", hint:"Ser"}, 
{word:"Sushi", hint:"Ry≈º"}, 
{word:"Burger", hint:"Frytki"}, 
{word:"Lody", hint:"≈Åy≈ºeczka"}, 
{word:"Czekolada", hint:"Rozpuszczenie"}, 
{word:"Kawa", hint:"Piana"}, 
{word:"Herbata", hint:"Czajniczek"}, 
{word:"Popcorn", hint:"Kino"}, 
{word:"Makaron", hint:"Sos"}, 
{word:"Tort", hint:"≈öwieczki"}, 

/* ZWIERZƒòTA */
{word:"Lew", hint:"Grzywa"}, 
{word:"Tygrys", hint:"Skok"}, 
{word:"Delfin", hint:"Skok"}, 
{word:"Rekin", hint:"Zƒôby"}, 
{word:"Orze≈Ç", hint:"Gniazdo"}, 
{word:"Pingwin", hint:"Marzec"}, 
{word:"Ko≈Ñ", hint:"Grzywa"}, 
{word:"Panda", hint:"Lenistwo"}, 
{word:"Wilk", hint:"Wyƒá"}, 
{word:"Nied≈∫wied≈∫", hint:"Mi√≥d"}, 

/* SPORT */
{word:"Pi≈Çka no≈ºna", hint:"Spalony"}, 
{word:"Koszyk√≥wka", hint:"Zbi√≥rka"}, 
{word:"Siatk√≥wka", hint:"As"}, 
{word:"Tenis", hint:"Love"}, 
{word:"Formu≈Ça 1", hint:"Pitstop"}, 
{word:"Boks", hint:"Worki"}, 
{word:"Maraton", hint:"≈öciana"}, 
{word:"Narciarstwo", hint:"Orlik"}, 
{word:"Surfing", hint:"Deska"}, 
{word:"Szachy", hint:"Wie≈ºa"}, 

/* EMOCJE I POJƒòCIA */
{word:"Mi≈Ço≈õƒá", hint:"Motyle"}, 
{word:"Strach", hint:"Dreszcze"}, 
{word:"Sukces", hint:"Konfetti"}, 
{word:"Pora≈ºka", hint:"Pud≈Ço"}, 
{word:"Marzenie", hint:"Sennik"}, 
{word:"Tajemnica", hint:"Klucz"}, 
{word:"Chaos", hint:"Tornado"}, 
{word:"Spok√≥j", hint:"Chmura"}, 
{word:"Przygoda", hint:"Plecak"}, 
{word:"Ryzyko", hint:"Ko≈õci"}, 

{word:"Cristiano Ronaldo", hint:"Siuuu"}, 
{word:"Lionel Messi", hint:"Leworƒôczny"}, 
{word:"Iga ≈öwiƒÖtek", hint:"Mentalno≈õƒá"}, 
{word:"Andrzej Sapkowski", hint:"Monster"}, 
{word:"Stephen King", hint:"Maine"}, 
{word:"J.K. Rowling", hint:"Edynburg"}, 
{word:"Leonardo da Vinci", hint:"Helikopter"}, 
{word:"Frida Kahlo", hint:"Unibrow"}, 
{word:"Walt Disney", hint:"Kaczkowski"}, 
{word:"Freddie Mercury", hint:"Zƒôby"}, 
{word:"Bruce Lee", hint:"Woda"}, 
{word:"Arnold Schwarzenegger", hint:"Hasta"}, 
{word:"Tom Hanks", hint:"Wilson"}, 
{word:"Keanu Reeves", hint:"Smutny"}, 
{word:"Emma Watson", hint:"Brown"}, 
{word:"Scarlett Johansson", hint:"Lucy"}, 
{word:"Ryan Reynolds", hint:"Aviation"}, 
{word:"Robert Downey Jr.", hint:"Sobriety"}, 
{word:"Chris Hemsworth", hint:"Bracia"}, 
{word:"Dwayne Johnson", hint:"Tequila"}, 

{word:"Sydney", hint:"Most"}, 
{word:"Dubaj", hint:"Fontanna"}, 
{word:"Los Angeles", hint:"Pla≈ºa"}, 
{word:"San Francisco", hint:"Tramwaj"}, 
{word:"Chicago", hint:"Pizza"}, 
{word:"Berlin", hint:"Curry"}, 
{word:"Praga", hint:"Piwo"}, 
{word:"Wenecja", hint:"Mosty"}, 
{word:"Barcelona", hint:"Park"}, 
{word:"Madryt", hint:"Plaza"}, 
{word:"Hawaje", hint:"Ukulele"}, 
{word:"Islandia", hint:"Elf"}, 
{word:"Alpy", hint:"Krowy"}, 
{word:"Mount Everest", hint:"Tlen"}, 
{word:"Niagara", hint:"Beczki"}, 
{word:"Wielki Kanion", hint:"Osio≈Ç"}, 
{word:"Antarktyda", hint:"Badacze"}, 
{word:"Grenlandia", hint:"Wikingowie"}, 
{word:"Malediwy", hint:"Bungalow"}, 
{word:"Bali", hint:"Swing"}, 

{word:"Avengers", hint:"Loki"}, 
{word:"Iron Man", hint:"Pepper"}, 
{word:"Thor", hint:"Lokiego"}, 
{word:"Hulk", hint:"Betty"}, 
{word:"Deadpool", hint:"Vanessa"}, 
{word:"Joker", hint:"Harley"}, 
{word:"Incepcja", hint:"Mal"}, 
{word:"Interstellar", hint:"Murphy"}, 
{word:"Gladiator", hint:"Commodus"}, 
{word:"Piraci z Karaib√≥w", hint:"Barbossa"}, 
{word:"Szybcy i w≈õciekli", hint:"Dom"}, 
{word:"John Wick", hint:"Pies"}, 
{word:"The Crown", hint:"Margaret"}, 
{word:"Narcos", hint:"Wagner"}, 
{word:"Dark", hint:"Clausen"}, 
{word:"The Witcher", hint:"Yennefer"}, 
{word:"Wednesday", hint:"Thing"}, 
{word:"Peaky Blinders", hint:"Grace"}, 
{word:"House of the Dragon", hint:"Daemon"}, 
{word:"Black Mirror", hint:"WhiteBear"}, 

{word:"Powerbank", hint:"Kabel"}, 
{word:"Tablet", hint:"Stylus"}, 
{word:"Drukarka", hint:"Papier"}, 
{word:"Klawiatura", hint:"Backlight"}, 
{word:"Myszka", hint:"RGB"}, 
{word:"Monitor", hint:"Hz"}, 
{word:"Router", hint:"Anteny"}, 
{word:"Pilot", hint:"Baterie"}, 
{word:"G≈Ço≈õnik", hint:"Bass"}, 
{word:"Mikrofon", hint:"Popfilter"}, 
{word:"Statyw", hint:"Korbka"}, 
{word:"Termos", hint:"Nakrƒôtka"}, 
{word:"Bidon", hint:"Smak"}, 
{word:"Scyzoryk", hint:"No≈ºyczki"}, 
{word:"Kompas", hint:"P√≥≈Çkula"}, 
{word:"Mapa", hint:"Fa≈Çdy"}, 
{word:"Notes", hint:"Linie"}, 
{word:"D≈Çugopis", hint:"Klip"}, 
{word:"Kalkulator", hint:"Bateria"}, 
{word:"Latte art", hint:"Dzbanek"}, 

{word:"Tacos", hint:"Lime"}, 
{word:"Burrito", hint:"Foil"}, 
{word:"Ramen", hint:"Jajko"}, 
{word:"Pad Thai", hint:"Orzechy"}, 
{word:"Pierogi", hint:"Gotowanie"}, 
{word:"Go≈ÇƒÖbki", hint:"Li≈õcie"}, 
{word:"Schabowy", hint:"Miƒôso"}, 
{word:"≈ªurek", hint:"Jajko"}, 
{word:"Barszcz", hint:"Uszka"}, 
{word:"Kebab", hint:"Og√≥rek"}, 
{word:"Falafel", hint:"Kula"}, 
{word:"Hummus", hint:"Pita"}, 
{word:"Guacamole", hint:"Chipsy"}, 
{word:"Nachosy", hint:"Jalape√±o"}, 
{word:"Croissant", hint:"Francja"}, 
{word:"Bagietka", hint:"Kie≈Çbasa"}, 
{word:"PƒÖczki", hint:"Cukier"}, 
{word:"Muffin", hint:"Kruszka"}, 
{word:"Smoothie", hint:"S≈Çomka"}, 
{word:"Milkshake", hint:"Wi≈õnie"}, 

{word:"S≈Ço≈Ñ", hint:"K≈Çy"}, 
{word:"≈ªyrafa", hint:"Plamy"}, 
{word:"Kangur", hint:"Skok"}, 
{word:"Koala", hint:"Drzewo"}, 
{word:"Hipopotam", hint:"S≈Ço≈Ñce"}, 
{word:"Nosoro≈ºec", hint:"Pancerz"}, 
{word:"Gepard", hint:"Plamy"}, 
{word:"Pantera", hint:"Drzewo"}, 
{word:"Lis", hint:"Jaskinia"}, 
{word:"Sowa", hint:"Sowa"}, 
{word:"JastrzƒÖb", hint:"Ofiara"}, 
{word:"Kruk", hint:"Gniazdo"}, 
{word:"Flaming", hint:"Stado"}, 
{word:"Aligator", hint:"Jaja"}, 
{word:"Kameleon", hint:"Jƒôzyk"}, 
{word:"O≈õmiornica", hint:"Tusz"}, 
{word:"Meduza", hint:"≈öwiat≈Ço"}, 
{word:"Konik morski", hint:"Samiec"}, 
{word:"Foka", hint:"S≈Ço≈Ñce"}, 
{word:"Mors", hint:"Broda"}, 

{word:"Triathlon", hint:"P≈Çywanie"}, 
{word:"Crossfit", hint:"Kettlebell"}, 
{word:"Kalistenika", hint:"DrƒÖ≈ºek"}, 
{word:"Podnoszenie ciƒô≈ºar√≥w", hint:"Przysiad"}, 
{word:"Judo", hint:"Kimono"}, 
{word:"Karate", hint:"Kata"}, 
{word:"Taekwondo", hint:"Spin"}, 
{word:"Wspinaczka", hint:"Haka"}, 
{word:"Bouldering", hint:"Maty"}, 
{word:"Hokej", hint:"Savior"}, 
{word:"≈Åy≈ºwiarstwo", hint:"Zimowe"}, 
{word:"Snowboard", hint:"Halfpipe"}, 
{word:"Skateboarding", hint:"Grind"}, 
{word:"Parkour", hint:"Roll"}, 
{word:"Strzelectwo", hint:"Tarcza"}, 
{word:"Golf", hint:"Caddyshack"}, 
{word:"Baseball", hint:"HomeRun"}, 
{word:"Rugby", hint:"Try"}, 
{word:"Badminton", hint:"Smash"}, 
{word:"Tenis sto≈Çowy", hint:"Spin"}, 

{word:"Motywacja", hint:"Kalender"}, 
{word:"Determinacja", hint:"Grip"}, 
{word:"Cierpliwo≈õƒá", hint:"Zegar"}, 
{word:"Wdziƒôczno≈õƒá", hint:"Dziennik"}, 
{word:"Zazdro≈õƒá", hint:"Patrzenie"}, 
{word:"Duma", hint:"Klatka"}, 
{word:"Wstyd", hint:"Rumieniec"}, 
{word:"Nostalgia", hint:"Fotografie"}, 
{word:"Ekscytacja", hint:"Mrowienie"}, 
{word:"Zaskoczenie", hint:"Usta"}, 
{word:"Rozczarowanie", hint:"Wzdychanie"}, 
{word:"Ulga", hint:"Odprƒô≈ºenie"}, 
{word:"Samotno≈õƒá", hint:"Cisza"}, 
{word:"Zaufanie", hint:"U≈õcisk"}, 
{word:"Odwaga", hint:"Skok"}, 
{word:"Kreatywno≈õƒá", hint:"M√≥zg"}, 
{word:"Ambicja", hint:"Drabina"}, 
{word:"Koncentracja", hint:"Laser"}, 
{word:"R√≥wnowaga", hint:"Joga"}, 
{word:"Wyobra≈∫nia", hint:"Chmury"}, 

{word:"Napoleon Bonaparte", hint:"Korsyka"}, 
{word:"Cleopatra", hint:"Aspis"}, 
{word:"Mahatma Gandhi", hint:"Sal"}, 
{word:"Martin Luther King Jr.", hint:"Montgomery"}, 
{word:"Nikola Tesla", hint:"PrƒÖd"}, 
{word:"Pablo Picasso", hint:"Byk"}, 
{word:"Vincent van Gogh", hint:"Ucho"}, 
{word:"William Shakespeare", hint:"Globe"}, 
{word:"Charlie Chaplin", hint:"Tramp"}, 
{word:"Usain Bolt", hint:"Jamaika"}, 
{word:"Michael Jordan", hint:"Number23"}, 
{word:"Serena Williams", hint:"Siostry"}, 
{word:"Oprah Winfrey", hint:"BookClub"}, 
{word:"Bill Gates", hint:"Droga"}, 
{word:"Mark Zuckerberg", hint:"Harvard"}, 
{word:"Jeff Bezos", hint:"Ksiƒôgarnia"}, 
{word:"Adele", hint:"Rozw√≥d"}, 
{word:"Drake", hint:"Views"}, 
{word:"Beyonc√©", hint:"Lemonade"}, 
{word:"Ed Sheeran", hint:"Tatoo"}, 
{word:"Franz Kafka", hint:"Pluskwa"}, 
{word:"Homer Simpson", hint:"Duff"}, 
{word:"Indiana Jones", hint:"Kapelusz"}, 
{word:"Lara Croft", hint:"Dwuguziki"}, 
{word:"Walter White", hint:"Ricin"}, 
{word:"Tony Stark", hint:"JARVIS"}, 
{word:"Darth Vader", hint:"Anakin"}, 
{word:"Gandalf", hint:"Balrog"}, 
{word:"Jon Snow", hint:"Ghost"}, 
{word:"Geralt z Rivii", hint:"Medalion"}, 
{word:"Kr√≥l Artur", hint:"Merlin"}, 
{word:"Leonardo DiCaprio", hint:"LeoMeme"}, 
{word:"Brad Pitt", hint:"Achilles"}, 
{word:"Angelina Jolie", hint:"Ig≈Ça"}, 
{word:"Keira Knightley", hint:"Piraci"}, 
{word:"Daniel Radcliffe", hint:"Equus"}, 
{word:"Emma Stone", hint:"SpiderSense"}, 
{word:"Tom Cruise", hint:"Scientology"}, 
{word:"Robert De Niro", hint:"Raging"}, 
{word:"Al Pacino", hint:"SayHello"}, 
{word:"Galileo Galilei", hint:"Piza"}, 
{word:"Isaac Newton", hint:"Alchemia"}, 
{word:"Charles Darwin", hint:"Finches"}, 
{word:"Sigmund Freud", hint:"Cygara"}, 
{word:"Wolfgang Amadeus Mozart", hint:"Salzburg"}, 
{word:"Ludwig van Beethoven", hint:"G≈Çuchota"}, 
{word:"Elvis Presley", hint:"Graceland"}, 
{word:"Madonna", hint:"Kabbalah"}, 
{word:"Kurt Cobain", hint:"Shotgun"}, 
{word:"Bob Marley", hint:"Trenchtown"}, 

{word:"Atlantyda", hint:"Platon"}, 
{word:"Watykan", hint:"Gwardia"}, 
{word:"Hollywood", hint:"Oscary"}, 
{word:"Manhattan", hint:"Subway"}, 
{word:"Transylwania", hint:"Hrabia"}, 
{word:"Himalaje", hint:"Yetii"}, 
{word:"Amazonka", hint:"Piranie"}, 
{word:"Sycylia", hint:"Cannoli"}, 
{word:"Alaska", hint:"Z≈Çoto"}, 
{word:"Czarnobyl", hint:"Turystyka"}, 
{word:"Stonehenge", hint:"Druidzi"}, 
{word:"Wersal", hint:"Madame"}, 
{word:"Pompeje", hint:"Wino"}, 
{word:"Giza", hint:"Khufu"}, 
{word:"Everest", hint:"Mallory"}, 
{word:"Fukushima", hint:"Sakura"}, 
{word:"Wall Street", hint:"Bull"}, 
{word:"Kilimand≈ºaro", hint:"Hemingway"}, 
{word:"Serengeti", hint:"WielkaMigracja"}, 
{word:"Andes", hint:"Mumia"}, 
{word:"Toskania", hint:"Oliwa"}, 
{word:"Sahara", hint:"Wielb≈ÇƒÖd"}, 
{word:"Patagonia", hint:"Pengwiny"}, 
{word:"Babilon", hint:"Nabuchodonozor"}, 
{word:"Sparta", hint:"Leonidas"}, 
{word:"Troja", hint:"Helena"}, 
{word:"Korsyka", hint:"Napoleon"}, 
{word:"Ibiza", hint:"Sunset"}, 
{word:"Himalaje", hint:"Medytacja"}, 
{word:"Malta", hint:"Megality"}, 
{word:"Wenecja", hint:"Karnawa≈Ç"}, 
{word:"Chicago", hint:"Blues"}, 
{word:"Nowy Orlean", hint:"Voodoo"}, 
{word:"Seattle", hint:"Kawa"}, 
{word:"Miami", hint:"Neony"}, 
{word:"Bangkok", hint:"Rzeka"}, 
{word:"Delhi", hint:"Rickshaws"}, 
{word:"Prypeƒá", hint:"Lunapark"}, 
{word:"Monte Carlo", hint:"Yachty"}, 
{word:"Antarktyda", hint:"Pingwiny"}, 
{word:"Grenlandia", hint:"Lodowiec"}, 
{word:"Sztokholm", hint:"Archipelag"}, 
{word:"Helsinki", hint:"Design"}, 
{word:"Oslo", hint:"Fiordy"}, 
{word:"Reykjavik", hint:"Elficki"}, 
{word:"Marrakesz", hint:"Wƒô≈ºe"}, 
{word:"Dubaj", hint:"Z≈Çoto"}, 
{word:"Sydney", hint:"Kangur"}, 
{word:"Rio de Janeiro", hint:"Fawela"}, 
{word:"Wolno≈õƒá", hint:"Orze≈Ç"},
{word:"Gladiator", hint:"Maximus"}, 
{word:"Incepcja", hint:"Limbo"}, 
{word:"Interstellar", hint:"Miller"}, 
{word:"Matrix", hint:"Czerwona"}, 
{word:"Titanic", hint:"Diament"}, 
{word:"Avatar", hint:"Naavi"}, 
{word:"Joker", hint:"Anarchia"}, 
{word:"Parasite", hint:"Schody"}, 
{word:"Shrek", hint:"O≈õlica"}, 
{word:"Kr√≥l Lew", hint:"Timon"}, 
{word:"Frozen", hint:"Olaf"}, 
{word:"Avengers", hint:"Snap"}, 
{word:"Batman", hint:"Alfred"}, 
{word:"Spider-Man", hint:"MJ"}, 
{word:"Deadpool", hint:"Cable"}, 
{word:"Harry Potter", hint:"Dursley"}, 
{word:"W≈Çadca Pier≈õcieni", hint:"Boromir"}, 
{word:"Star Wars", hint:"HanSolo"}, 
{word:"Jurassic Park", hint:"Nedry"}, 
{word:"The Godfather", hint:"Michael"}, 
{word:"Fight Club", hint:"Tyler"}, 
{word:"Pulp Fiction", hint:"Marsellus"}, 
{word:"Forrest Gump", hint:"Jenny"}, 
{word:"Top Gun", hint:"Goose"}, 
{word:"La La Land", hint:"Planetarium"}, 
{word:"Czarna Pantera", hint:"Okoye"}, 
{word:"Thor", hint:"Loki"}, 
{word:"Iron Man", hint:"Happy"}, 
{word:"Minionki", hint:"Vector"}, 
{word:"Piraci z Karaib√≥w", hint:"Bootstrap"}, 
{word:"John Wick", hint:"Winston"}, 
{word:"Mission Impossible", hint:"Ethan"}, 
{word:"James Bond", hint:"Moneypenny"}, 
{word:"Rocky", hint:"Mickey"}, 
{word:"Rambo", hint:"Mur"}, 
{word:"Terminator", hint:"Sarah"}, 
{word:"Predator", hint:"Mud"}, 
{word:"Obcy", hint:"Ripley"}, 
{word:"The Social Network", hint:"Winklevoss"}, 
{word:"Wilk z Wall Street", hint:"Donnie"}, 
{word:"Breaking Bad", hint:"Saul"}, 
{word:"Dark", hint:"Jaskinia"}, 
{word:"Stranger Things", hint:"Eleven"}, 
{word:"The Office", hint:"Jim"}, 
{word:"Peaky Blinders", hint:"Polly"}, 
{word:"Narcos", hint:"Murphy"}, 
{word:"The Crown", hint:"Philip"}, 
{word:"Wednesday", hint:"Enid"}, 
{word:"House of the Dragon", hint:"Aegon"}, 
{word:"Black Mirror", hint:"WhiteBear"}, 

/* PRZEDMIOTY */
{word:"Smartfon", hint:"Pƒôkniƒôcie"}, 
{word:"Laptop", hint:"Wentylator"}, 
{word:"Zegarek", hint:"Bateria"}, 
{word:"Kompas", hint:"Ig≈Ça"}, 
{word:"Mapa", hint:"Fa≈Çdy"}, 
{word:"Latarka", hint:"≈öwiat≈Ço"}, 
{word:"Parasol", hint:"Wiatr"}, 
{word:"Okulary", hint:"≈öruby"}, 
{word:"S≈Çuchawki", hint:"Przew√≥d"}, 
{word:"Powerbank", hint:"Kabel"}, 
{word:"Drukarka", hint:"Zatkany"}, 
{word:"Kalkulator", hint:"Bateria"}, 
{word:"Mikrofon", hint:"Popfilter"}, 
{word:"G≈Ço≈õnik", hint:"Bass"}, 
{word:"Kamera", hint:"Selfie"}, 
{word:"Dron", hint:"Bateria"}, 
{word:"Router", hint:"Anteny"}, 
{word:"Pilot", hint:"Baterie"}, 
{word:"Statyw", hint:"Korbka"}, 
{word:"Termos", hint:"Nakrƒôtka"}, 
{word:"Scyzoryk", hint:"No≈ºyczki"}, 
{word:"M≈Çotek", hint:"Gwo≈∫dzie"}, 
{word:"Wiertarka", hint:"Wi√≥ry"}, 
{word:"≈örubokrƒôt", hint:"Bit"}, 
{word:"Lod√≥wka", hint:"Szron"}, 
{word:"Mikrofala", hint:"Turntable"}, 
{word:"Toster", hint:"Spalony"}, 
{word:"Odkurzacz", hint:"Worek"}, 
{word:"≈ªelazko", hint:"Deska"}, 
{word:"Klucz", hint:"Zardzewia≈Çy"}, 
{word:"Portfel", hint:"NFC"}, 
{word:"Walizka", hint:"Etykieta"}, 
{word:"Plecak", hint:"Zamek"}, 
{word:"Latte", hint:"Dzbanek"}, 
{word:"KsiƒÖ≈ºka", hint:"Zak≈Çadka"}, 
{word:"Notes", hint:"Karteczki"}, 
{word:"D≈Çugopis", hint:"Klip"}, 
{word:"Zapalniczka", hint:"Zippo"}, 
{word:"≈öwieca", hint:"Knit"}, 
{word:"Lornetka", hint:"Powiƒôkszenie"}, 
{word:"Kajdanki", hint:"Kluczki"}, 
{word:"Maska", hint:"Respirator"}, 
{word:"Tarcza", hint:"Balistyczna"}, 
{word:"Miecz", hint:"pochwa"}, 
{word:"Korona", hint:"Diadem"}, 
{word:"Ber≈Ço", hint:"Szkielet"}, 
{word:"Teleskop", hint:"Okular"}, 
{word:"Gitara", hint:"Paznokcie"}, 
{word:"Fortepian", hint:"Pedal"}, 
{word:"Perfumy", hint:"Atomizer"}, 

/* POJƒòCIA */
{word:"Mi≈Ço≈õƒá", hint:"Motyle"}, 
{word:"Strach", hint:"Dreszcze"}, 
{word:"Sukces", hint:"Konfetti"}, 
{word:"Pora≈ºka", hint:"Pud≈Ço"}, 
{word:"Marzenie", hint:"Sennik"}, 
{word:"Chaos", hint:"Tornado"}, 
{word:"Spok√≥j", hint:"Chmura"}, 
{word:"Ryzyko", hint:"Ko≈õci"}, 
{word:"Motywacja", hint:"Kalender"}, 
{word:"Determinacja", hint:"Grip"}, 
{word:"Cierpliwo≈õƒá", hint:"Zegar"}, 
{word:"Wdziƒôczno≈õƒá", hint:"Dziennik"}, 
{word:"Zazdro≈õƒá", hint:"Patrzenie"}, 
{word:"Duma", hint:"Klatka"}, 
{word:"Wstyd", hint:"Rumieniec"}, 
{word:"Nostalgia", hint:"Fotografie"}, 
{word:"Ekscytacja", hint:"Mrowienie"}, 
{word:"Zaskoczenie", hint:"Usta"}, 
{word:"Rozczarowanie", hint:"Wzdychanie"}, 
{word:"Ulga", hint:"Odprƒô≈ºenie"}, 
{word:"Samotno≈õƒá", hint:"Cisza"}, 
{word:"Zaufanie", hint:"U≈õcisk"}, 
{word:"Odwaga", hint:"Skok"}, 
{word:"Kreatywno≈õƒá", hint:"M√≥zg"}, 
{word:"Ambicja", hint:"Drabina"}, 
{word:"Koncentracja", hint:"Laser"}, 
{word:"R√≥wnowaga", hint:"Joga"}, 
{word:"Wyobra≈∫nia", hint:"Chmury"}, 
{word:"Empatia", hint:"Wsp√≥≈Çczucie"}, 
{word:"Charyzma", hint:"U≈õmiech"}, 
{word:"Intuicja", hint:"Przeczucie"}, 
{word:"Lojalno≈õƒá", hint:"Pies"}, 
{word:"Honor", hint:"S≈Çowo"}, 
{word:"Manipulacja", hint:"Lalki"}, 
{word:"Iluzja", hint:"Lusterko"}, 
{word:"Inspiracja", hint:"≈ªar√≥wka"}, 
{word:"Presja", hint:"Waga"}, 
{word:"Rutyna", hint:"Budzik"}, 
{word:"Adrenalina", hint:"Spadochron"}, 
{word:"Pasja", hint:"P≈Çomie≈Ñ"}, 
{word:"Obsesja", hint:"≈Åa≈Ñcuch"}, 
{word:"Satysfakcja", hint:"U≈õmiech"}, 
{word:"Melancholia", hint:"Deszcz"}, 
{word:"Euforia", hint:"Taniec"}, 
{word:"Ironia", hint:"Przekora"}, 
{word:"Paradoks", hint:"Schroedinger"}, 
{word:"Autorytet", hint:"Ber≈Ço"}, 
{word:"To≈ºsamo≈õƒá", hint:"Lustro"}, 
{word:"Wolno≈õƒá", hint:"Orze≈Ç"},
{word:"Albert Camus", hint:"Absurd"},
{word:"Platon", hint:"Jaskinia"},
{word:"Sokrates", hint:"Cykuta"},
{word:"Arystoteles", hint:"Liceum"},
{word:"Fryderyk Chopin", hint:"Etiuda"},
{word:"Adam Mickiewicz", hint:"Improwizacja"},
{word:"Juliusz S≈Çowacki", hint:"Geneza"},
{word:"Henryk Sienkiewicz", hint:"Latarnik"},
{word:"Maria Sk≈Çodowska-Curie", hint:"Prob√≥wka"},
{word:"Stanis≈Çaw Lem", hint:"Pilot"},
{word:"George Orwell", hint:"Folwark"},
{word:"Ernest Hemingway", hint:"Hawana"},
{word:"Fiodor Dostojewski", hint:"Raskolnikow"},
{word:"Lew To≈Çstoj", hint:"Anna"},
{word:"Mark Twain", hint:"Missisipi"},
{word:"Agatha Christie", hint:"Orient"},
{word:"Dan Brown", hint:"Symbologia"},
{word:"Umberto Eco", hint:"Biblioteka"},
{word:"J.R.R. Tolkien", hint:"Silmaril"},
{word:"C.S. Lewis", hint:"Szafa"},

{word:"Reykjavik", hint:"Gejzer"},
{word:"Kair", hint:"Papirus"},
{word:"Hanoi", hint:"Skuter"},
{word:"Seul", hint:"Hanbok"},
{word:"Toronto", hint:"Li≈õƒá"},
{word:"Buenos Aires", hint:"Tango"},
{word:"Lizbona", hint:"Tram28"},
{word:"Edynburg", hint:"Fringe"},
{word:"Glasgow", hint:"Clyde"},
{word:"Monachium", hint:"Oktober"},

{word:"Photoshop", hint:"Warstwy"},
{word:"Excel", hint:"Formu≈Ça"},
{word:"PowerPoint", hint:"Slajd"},
{word:"Word", hint:"Margines"},
{word:"Linux", hint:"Pingwin"},
{word:"Windows", hint:"Start"},
{word:"MacBook", hint:"Jab≈Çko"},
{word:"Android", hint:"Robot"},
{word:"iPhone", hint:"Notch"},
{word:"PlayStation", hint:"Tr√≥jkƒÖt"},

{word:"Cappuccino", hint:"Kakao"},
{word:"Espresso", hint:"25ml"},
{word:"Matcha", hint:"Bambus"},
{word:"Kimchi", hint:"Ferment"},
{word:"Bibimbap", hint:"Misa"},
{word:"Pho", hint:"Bulion"},
{word:"Ceviche", hint:"Limeta"},
{word:"Risotto", hint:"Arborio"},
{word:"Tapas", hint:"Ma≈Çe"},
{word:"Gnocchi", hint:"Widelec"},

{word:"Kameleon", hint:"Chromatofor"},
{word:"Axolotl", hint:"Regeneracja"},
{word:"Kapibara", hint:"Relaks"},
{word:"Surikatka", hint:"Stra≈ºnik"},
{word:"Puchacz", hint:"Syczek"},
{word:"Koliber", hint:"Zawis"},
{word:"Mr√≥wkojad", hint:"Termity"},
{word:"Narwal", hint:"R√≥g"},
{word:"Tarantula", hint:"W≈Çoski"},
{word:"Skorpion", hint:"≈ªƒÖd≈Ço"},

{word:"Szermierka", hint:"Plansza"},
{word:"Biathlon", hint:"Karabin"},
{word:"Snooker", hint:"Czerwona"},
{word:"Curling", hint:"Szczotka"},
{word:"Sumo", hint:"Dohyo"},
{word:"Kitesurfing", hint:"Latawiec"},
{word:"Wakeboarding", hint:"WyciƒÖg"},
{word:"Esport", hint:"LAN"},
{word:"Szachy b≈Çyskawiczne", hint:"Bullet"},
{word:"Pentathlon", hint:"Piƒôciob√≥j"},

{word:"Algorytm", hint:"Kroki"},
{word:"Paradigma", hint:"Zmiana"},
{word:"Hipoteza", hint:"Test"},
{word:"Teoria", hint:"Model"},
{word:"Grawitacja", hint:"Krzywizna"},
{word:"Relatywno≈õƒá", hint:"Czasoprzestrze≈Ñ"},
{word:"Ewolucja", hint:"Dob√≥r"},
{word:"Inflacja", hint:"Koszyk"},
{word:"Recesja", hint:"Minus"},
{word:"Globalizacja", hint:"Kontener"},

{word:"Thor", hint:"Mjolnir"},
{word:"Loki", hint:"Psikus"},
{word:"Hades", hint:"Podziemie"},
{word:"Zeus", hint:"Piorun"},
{word:"Atena", hint:"Sowa"},
{word:"Posejdon", hint:"Tr√≥jzƒÖb"},
{word:"Ozyrys", hint:"Nil"},
{word:"Ra", hint:"S≈Ço≈Ñce"},
{word:"Feniks", hint:"Popi√≥≈Ç"},
{word:"Pegaz", hint:"Skrzyd≈Ça"},

{word:"GitHub", hint:"Commit"},
{word:"Stack Overflow", hint:"B≈ÇƒÖd"},
{word:"Docker", hint:"Kontener"},
{word:"Kubernetes", hint:"Klaster"},
{word:"Blockchain", hint:"≈Åa≈Ñcuch"},
{word:"Bitcoin", hint:"Halving"},
{word:"Ethereum", hint:"Gas"},
{word:"ChatGPT", hint:"Prompt"},
{word:"Midjourney", hint:"Render"},
{word:"Canva", hint:"Szablon"},

{word:"Origami", hint:"≈ªuraw"},
{word:"Kaligrafia", hint:"Tusz"},
{word:"Ceramika", hint:"Ko≈Ço"},
{word:"Rze≈∫ba", hint:"D≈Çuto"},
{word:"Akwarela", hint:"Woda"},
{word:"Graffiti", hint:"Mur"},
{word:"Tatua≈º", hint:"Ig≈Ça"},
{word:"Balet", hint:"Pointy"},
{word:"Opera", hint:"Aria"},
{word:"Jazz", hint:"Improwizacja"},

{word:"Labirynt", hint:"Niƒá"},
{word:"Kometa", hint:"Warkocz"},
{word:"Asteroida", hint:"Pas"},
{word:"Czarna dziura", hint:"Horyzont"},
{word:"Supernowa", hint:"Eksplozja"},
{word:"Galaktyka", hint:"Spirala"},
{word:"Ksiƒô≈ºyc", hint:"Fazy"},
{word:"Mars", hint:"≈Åazik"},
{word:"Wenus", hint:"Chmury"},
{word:"Saturn", hint:"Pier≈õcienie"},

{word:"Detektyw", hint:"Lupa"},
{word:"Szpieg", hint:"Mikrofilm"},
{word:"Archeolog", hint:"Pƒôdzelek"},
{word:"Astronauta", hint:"Skafander"},
{word:"Stra≈ºak", hint:"Hydrant"},
{word:"Ratownik", hint:"Defibrylator"},
{word:"Barista", hint:"Tamper"},
{word:"Sommelier", hint:"Aromat"},
{word:"Kowboj", hint:"Lasso"},
{word:"Samuraj", hint:"Katana"},

{word:"Minimalizm", hint:"Mniej"},
{word:"Barok", hint:"Przepych"},
{word:"Renesans", hint:"Humanizm"},
{word:"Gotyk", hint:"Witra≈º"},
{word:"Impresjonizm", hint:"≈öwiat≈Ço"},
{word:"Surrealizm", hint:"Sen"},
{word:"Realizm", hint:"Codzienno≈õƒá"},
{word:"Romantyzm", hint:"Burza"},
{word:"Modernizm", hint:"Manifest"},
{word:"Postmodernizm", hint:"Cytat"},

{word:"DNA", hint:"Helisa"},
{word:"Neuron", hint:"Synapsa"},
{word:"Hormon", hint:"Kortyzol"},
{word:"Adrenalina", hint:"Walcz"},
{word:"Serotonina", hint:"Nastr√≥j"},
{word:"Dopamina", hint:"Nagroda"},
{word:"Insulina", hint:"Glukoza"},
{word:"Antybiotyk", hint:"Penicylina"},
{word:"Wirus", hint:"Mutacja"},
{word:"Bakteria", hint:"Kolonia"},

{word:"Sztorm", hint:"Fale"},
{word:"Tornado", hint:"Lej"},
{word:"Trzƒôsienie ziemi", hint:"Richter"},
{word:"Wulkan", hint:"Lawa"},
{word:"Lawina", hint:"≈önieg"},
{word:"Susza", hint:"Pƒôkniƒôcia"},
{word:"Pow√≥d≈∫", hint:"Wa≈Ç"},
{word:"Mg≈Ça", hint:"Widoczno≈õƒá"},
{word:"Tƒôcza", hint:"Spektrum"},
{word:"Zaƒámienie", hint:"Cie≈Ñ"}
];


// UI helpers
function show(id){
    document.querySelectorAll(".container > div").forEach(d=>d.classList.add("hidden"));
    document.getElementById(id).classList.remove("hidden");

    // Cofnij widoczne wszƒôdzie poza menu i grƒÖ
    const backBtn = document.getElementById("backBtn");
    if(id === "menu" || id === "game"){
        backBtn.classList.add("hidden");
    } else {
        backBtn.classList.remove("hidden");
    }
}

function goBack(){
    show("menu");
}

// MENU
function showCreate(){ show("create"); }
function showJoin(){ show("join"); }

// GENERUJ KOD
function generateCode(){
    return Math.floor(100000 + Math.random()*900000).toString();
}

// CREATE GAME
function createGame(mode){
    playerName = document.getElementById("createName").value;
    if(!playerName) return;

    gameMode = mode;
    lobbyId = generateCode();
    isHost = true;

    db.ref("lobbies/"+lobbyId).set({
        host: playerId,
        state: "lobby",
        mode: gameMode
    });

    db.ref("lobbies/"+lobbyId+"/players/"+playerId).set({
        name: playerName
    });

    enterLobby();
}

// JOIN GAME
function joinGame(){
    playerName = document.getElementById("joinName").value;
    lobbyId = document.getElementById("joinCode").value;

    if(!playerName || !lobbyId) return;

    db.ref("lobbies/"+lobbyId).once("value", snap=>{
        if(!snap.exists()){
            alert("Lobby nie istnieje!");
            return;
        }

        db.ref("lobbies/"+lobbyId+"/players/"+playerId).set({
            name: playerName
        });

        enterLobby();
    });
}

// LOBBY
function enterLobby(){
    show("lobby");
    document.getElementById("lobbyCode").innerText = lobbyId;

    db.ref("lobbies/"+lobbyId+"/players").on("value", snap=>{
    const container = document.getElementById("players");
    container.innerHTML = "";

    const hostId = snap.ref.parent.parent.child("host");

    db.ref("lobbies/"+lobbyId+"/players/"+playerId).on("value", snap=>{
    if(!snap.exists() && !isLeaving){
        alert("Zosta≈Çe≈õ wyrzucony z lobby.");
        location.reload();
    }
});

    snap.forEach(p=>{
    const data = p.val();
    const id = p.key;

    const card = document.createElement("div");
    card.className = "player-card";

    const initial = data.name.charAt(0).toUpperCase();

    card.innerHTML = `
        <div class="player-left">
            <div class="avatar">${initial}</div>
            <div class="player-info">
                <div class="player-name">${data.name}</div>
                <div class="player-status">Online</div>
            </div>
        </div>
    `;

    

    // ‚ùå Kick button tylko dla hosta i nie dla siebie
    if(isHost && id !== playerId){
        const kickBtn = document.createElement("button");
        kickBtn.className = "kick-btn";
        kickBtn.innerText = "‚úñ";
        kickBtn.onclick = () => confirmKick(id, data.name);
        card.appendChild(kickBtn);
    }

    container.appendChild(card);


});

    // oznacz hosta
    db.ref("lobbies/"+lobbyId+"/host").once("value", hostSnap=>{
        const hostId = hostSnap.val();
        document.querySelectorAll(".player-card").forEach((card,index)=>{
            const playerKey = Object.keys(snap.val())[index];
            if(playerKey === hostId){
                card.innerHTML += `<div class="host-badge">üëë</div>`;
            }
        });
    });
});

db.ref("lobbies/"+lobbyId).on("value", snap=>{
    let data = snap.val();
    if(!data) return;

    if(data.state === "game"){
        startGameView(data);
    }

    if(data.state === "lobby"){
        show("lobby");
    }
});

    document.getElementById("startBtn").style.display = isHost ? "block" : "none";
}

// START GAME
function startGame(){
    if(!isHost) return;
    newRound();
}

function backToLobby(){
    if(!isHost) return;

    db.ref("lobbies/"+lobbyId).update({
        state: "lobby",
        word: null,
        hint: null,
        impostor: null
    });
}

function newRound(){

    if(!isHost) return;

    db.ref("lobbies/"+lobbyId).once("value", lobbySnap => {

        if(!lobbySnap.exists()) return;

        let lobbyData = lobbySnap.val();
        let mode = lobbyData.mode || "classic";

        db.ref("lobbies/"+lobbyId+"/players").once("value", snap => {

            let playersObj = snap.val();
            if(!playersObj) return;

            let players = Object.keys(playersObj);

            if(players.length < 2){
                alert("Potrzeba minimum 2 graczy!");
                return;
            }

            let impostor = players[Math.floor(Math.random()*players.length)];
            let selected = words[Math.floor(Math.random()*words.length)];

            db.ref("lobbies/"+lobbyId).update({
                state: "game",
                word: selected.word,
                hint: mode === "hint" ? selected.hint : "",
                impostor: impostor,
                mode: mode
            });

        });
    });
}

// GAME VIEW
function startGameView(data){
    show("game");

    const revealCard = document.getElementById("revealCard");
    const wordBox = document.getElementById("word");
    const roleLabel = document.getElementById("roleLabel");

    revealCard.classList.remove("impostor");
    revealCard.classList.remove("show");

    if(playerId === data.impostor){

        revealCard.classList.add("impostor");
        roleLabel.innerText = "üïµÔ∏è IMPOSTOR";

        if(data.mode === "hint" && data.hint){
            wordBox.innerText = "Podpowied≈∫: " + data.hint;
        } else {
            wordBox.innerText = "Nie znasz has≈Ça...";
        }

    } else {

        roleLabel.innerText = "üéØ TWOJE HAS≈ÅO";
        wordBox.innerText = data.word;

    }

    // restart animacji
    void revealCard.offsetWidth;
    revealCard.classList.add("show");

    document.getElementById("newRoundBtn").style.display = isHost ? "block" : "none";

    document.getElementById("backToLobbyBtn").style.display = isHost ? "block" : "none";
}

// LEAVE
function leaveGame(){
    isLeaving = true;

    if(lobbyId){
        db.ref("lobbies/"+lobbyId+"/players/"+playerId).remove().then(()=>{
            location.reload();
        });
    } else {
        location.reload();
    }
}

function confirmKick(id, name){
    playerToKick = id;
    document.getElementById("kickText").innerText =
        "Czy na pewno chcesz wyrzuciƒá gracza: " + name + "?";
    document.getElementById("kickModal").classList.remove("hidden");
}

function closeKickModal(){
    playerToKick = null;
    document.getElementById("kickModal").classList.add("hidden");
}

function executeKick(){
    if(!playerToKick) return;

    db.ref("lobbies/"+lobbyId+"/players/"+playerToKick).remove();

    closeKickModal();
}
</script>

</body>
</html>